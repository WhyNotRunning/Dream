<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="python," />





  <link rel="alternate" href="/atom.xml" title="pangyalin的博客" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.jpg?v=0.5.0" />






<meta name="description" content="Python学习(2)">
<meta property="og:type" content="article">
<meta property="og:title" content="python学习(2)">
<meta property="og:url" content="http://www.iwooto.com/2016/04/06/python学习-2/index.html">
<meta property="og:site_name" content="pangyalin的博客">
<meta property="og:description" content="Python学习(2)">
<meta property="og:updated_time" content="2016-04-05T17:26:23.752Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python学习(2)">
<meta name="twitter:description" content="Python学习(2)">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> python学习(2) | pangyalin的博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">pangyalin的博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">pangyalin的博客</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                python学习(2)
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-06T01:19:58+08:00" content="2016-04-06">
              2016-04-06
            </time>
          </span>

          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Python_u5B66_u4E60_282_29"><a href="#Python_u5B66_u4E60_282_29" class="headerlink" title="Python学习(2)"></a>Python学习(2)</h1><a id="more"></a>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> hello </span><br><span class="line"></span><br><span class="line"><span class="comment"># 常用内建模块</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># datetime</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">print(datetime.now())</span><br><span class="line"><span class="comment">#datetime类型转换为timestamp</span></span><br><span class="line">dt = datetime(<span class="number">2015</span>, <span class="number">4</span>, <span class="number">19</span>, <span class="number">12</span>, <span class="number">20</span>) <span class="comment"># 用指定日期时间创建datetime</span></span><br><span class="line">st = dt.timestamp()</span><br><span class="line">print(st)</span><br><span class="line"><span class="comment">#timestamp转换为datetime</span></span><br><span class="line">temp = datetime.fromtimestamp(st) <span class="comment"># 本地时间</span></span><br><span class="line">ucttemp = datetime.utcfromtimestamp(st) <span class="comment"># UTC时间</span></span><br><span class="line">print(temp,ucttemp)</span><br><span class="line"><span class="comment"># str转换为datetime</span></span><br><span class="line">cday = datetime.strptime(<span class="string">'2015-6-1 18:19:59'</span>, <span class="string">'%Y-%m-%d %H:%M:%S'</span>)</span><br><span class="line">print(cday)</span><br><span class="line"><span class="comment"># datetime转换为str</span></span><br><span class="line">now = datetime.now()</span><br><span class="line">print(now.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>))</span><br><span class="line"><span class="comment"># datetime加减</span></span><br><span class="line"><span class="comment"># 对日期和时间进行加减实际上就是把datetime往后或往前计算，得到新的datetime。</span></span><br><span class="line"><span class="comment"># 加减可以直接用+和-运算符，不过需要导入timedelta这个类</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta</span><br><span class="line">now = now + timedelta(days=<span class="number">2</span>, hours=<span class="number">12</span>)</span><br><span class="line">print(now)</span><br><span class="line"><span class="comment"># 本地时间转换为UTC时间</span></span><br><span class="line"><span class="comment"># 一个datetime类型有一个时区属性tzinfo，但是默认为None，</span></span><br><span class="line"><span class="comment"># 所以无法区分这个datetime到底是哪个时区，除非强行给datetime设置一个时区</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta, timezone</span><br><span class="line">tz_utc_8 = timezone(timedelta(hours=<span class="number">8</span>)) <span class="comment"># 创建时区UTC+8:00</span></span><br><span class="line">now = datetime.now()</span><br><span class="line">dt = now.replace(tzinfo=tz_utc_8) <span class="comment"># 强制设置为UTC+8:00</span></span><br><span class="line">print(dt)</span><br><span class="line"><span class="comment"># 我们可以先通过utcnow()拿到当前的UTC时间，再转换为任意时区的时间</span></span><br><span class="line">utc_dt = datetime.utcnow().replace(tzinfo=timezone.utc)<span class="comment"># 拿到UTC时间，并强制设置时区为UTC+0:00</span></span><br><span class="line">bj_dt = utc_dt.astimezone(timezone(timedelta(hours=<span class="number">8</span>)))<span class="comment"># astimezone()将转换时区为北京时间</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># collections</span></span><br><span class="line"><span class="comment"># collections是Python内建的一个集合模块，提供了许多有用的集合类。</span></span><br><span class="line"><span class="comment"># namedtuple</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line">Point = namedtuple(<span class="string">'Point'</span>, [<span class="string">'x'</span>, <span class="string">'y'</span>])</span><br><span class="line">p = Point(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">print(p.x, p.y)</span><br><span class="line"><span class="comment"># deque</span></span><br><span class="line"><span class="comment"># deque是为了高效实现插入和删除操作的双向列表，适合用于队列和栈：</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line">d = deque([<span class="string">'1'</span>,<span class="number">2</span>,<span class="string">'3'</span>])</span><br><span class="line">d.append(<span class="string">'4'</span>)</span><br><span class="line">print(d)</span><br><span class="line">d.pop()</span><br><span class="line">print(d)</span><br><span class="line">d.appendleft(<span class="string">'0'</span>)</span><br><span class="line">print(d)</span><br><span class="line">d.popleft()</span><br><span class="line">print(d)</span><br><span class="line"><span class="comment"># defaultdict</span></span><br><span class="line"><span class="comment"># 使用dict时，如果引用的Key不存在，就会抛出KeyError。如果希望key不存在时，返回一个默认值，就可以用defaultdict</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line">d = defaultdict(<span class="keyword">lambda</span>:<span class="string">'N/A'</span>)</span><br><span class="line">d[<span class="string">'key'</span>] = <span class="string">'val'</span></span><br><span class="line">print(d[<span class="string">'key'</span>])</span><br><span class="line">print(d[<span class="string">'key2'</span>])</span><br><span class="line"><span class="comment"># OrderedDict</span></span><br><span class="line"><span class="comment"># 使用dict时，Key是无序的。在对dict做迭代时，我们无法确定Key的顺序。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果要保持Key的顺序，可以用OrderedDict,OrderedDict的Key会按照插入的顺序排列，不是Key本身排序</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line">od = OrderedDict()</span><br><span class="line">od[<span class="string">'y'</span>] = <span class="string">'y'</span></span><br><span class="line">od[<span class="string">'x'</span>] = <span class="string">'x'</span></span><br><span class="line">od[<span class="string">'z'</span>] = <span class="string">'z'</span></span><br><span class="line">print(od)</span><br><span class="line"><span class="comment"># OrderedDict可以实现一个FIFO（先进先出）的dict，当容量超出限制时，先删除最早添加的Key</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LastUpdatedOrderedDict</span><span class="params">(OrderedDict)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, capacity)</span>:</span></span><br><span class="line">        super(LastUpdatedOrderedDict, self).__init__()</span><br><span class="line">        self._capacity = capacity</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, key, value)</span>:</span></span><br><span class="line">        containsKey = <span class="number">1</span> <span class="keyword">if</span> key <span class="keyword">in</span> self <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> len(self) - containsKey &gt;= self._capacity:</span><br><span class="line">            last = self.popitem(last=<span class="keyword">False</span>)</span><br><span class="line">            print(<span class="string">'remove:'</span>, last)</span><br><span class="line">        <span class="keyword">if</span> containsKey:</span><br><span class="line">            <span class="keyword">del</span> self[key]</span><br><span class="line">            print(<span class="string">'set:'</span>, (key, value))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'add:'</span>, (key, value))</span><br><span class="line">        OrderedDict.__setitem__(self, key, value)</span><br><span class="line"><span class="comment"># Counter</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Counter是一个简单的计数器，例如，统计字符出现的个数</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">c = Counter()</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="string">'abcdefabc'</span>:</span><br><span class="line">	c[x] = c[x] + <span class="number">1</span></span><br><span class="line">print(c)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># base64</span></span><br><span class="line"><span class="comment"># ase64是一种用64个字符来表示任意二进制数据的方法。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用记事本打开exe、jpg、pdf这些文件时，我们都会看到一大堆乱码，因为二进制文件包含很多无法显示和打印的字符，</span></span><br><span class="line"><span class="comment"># 所以，如果要让记事本这样的文本处理软件能处理二进制数据，就需要一个二进制到字符串的转换方法。</span></span><br><span class="line"><span class="comment"># Base64是一种最常见的二进制编码方法。</span></span><br><span class="line"><span class="comment"># Base64的原理很简单，首先，准备一个包含64个字符的数组：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ['A', 'B', 'C', ... 'a', 'b', 'c', ... '0', '1', ... '+', '/']</span></span><br><span class="line"><span class="comment"># 然后，对二进制数据进行处理，每3个字节一组，一共是3x8=24bit，划为4组，每组正好6个bit：</span></span><br><span class="line"><span class="comment"># 这样我们得到4个数字作为索引，然后查表，获得相应的4个字符，就是编码后的字符串。</span></span><br><span class="line"><span class="comment"># 所以，Base64编码会把3字节的二进制数据编码为4字节的文本数据，长度增加33%，</span></span><br><span class="line"><span class="comment"># 好处是编码后的文本数据可以在邮件正文、网页等直接显示。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果要编码的二进制数据不是3的倍数，最后会剩下1个或2个字节怎么办？</span></span><br><span class="line"><span class="comment"># Base64用\x00字节在末尾补足后，再在编码的末尾加上1个或2个=号，表示补了多少字节，解码的时候，会自动去掉。</span></span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line">print(base64.b64encode(<span class="string">b'A'</span>))</span><br><span class="line">print(base64.b64decode(<span class="string">b'cmluZw=='</span>))</span><br><span class="line"><span class="comment"># 由于标准的Base64编码后可能出现字符+和/，在URL中就不能直接作为参数，</span></span><br><span class="line"><span class="comment"># 所以又有一种"url safe"的base64编码，其实就是把字符+和/分别变成-和_</span></span><br><span class="line">print(base64.b64encode(<span class="string">b'i\xb7\x1d\xfb\xef\xff'</span>))</span><br><span class="line">print(base64.urlsafe_b64encode(<span class="string">b'i\xb7\x1d\xfb\xef\xff'</span>))</span><br><span class="line">print(base64.urlsafe_b64decode(<span class="string">'abcd--__'</span>))</span><br><span class="line"><span class="comment"># Base64是一种通过查表的编码方法，不能用于加密，即使使用自定义的编码表也不行。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Base64适用于小段内容的编码，比如数字证书签名、Cookie的内容等。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># struct</span></span><br><span class="line"><span class="comment"># Python提供了一个struct模块来解决bytes和其他二进制数据类型的转换。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># struct的pack函数把任意数据类型变成bytes</span></span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line">b = struct.pack(<span class="string">'&gt;I'</span>, <span class="number">10240099</span>)</span><br><span class="line">print(b)</span><br><span class="line"><span class="comment"># pack的第一个参数是处理指令，'&gt;I'的意思是：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &gt;表示字节顺序是big-endian，也就是网络序，I表示4字节无符号整数。</span></span><br><span class="line"><span class="comment"># unpack把bytes变成相应的数据类型：</span></span><br><span class="line">struct.unpack(<span class="string">'&gt;IH'</span>, <span class="string">b'\xf0\xf0\xf0\xf0\x80\x80'</span>)</span><br><span class="line"><span class="comment"># 根据&gt;IH的说明，后面的bytes依次变为I：4字节无符号整数和H：2字节无符号整数。</span></span><br><span class="line"><span class="comment"># Windows的位图文件（.bmp）是一种非常简单的文件格式，我们来用struct分析一下。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 首先找一个bmp文件，没有的话用“画图”画一个。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读入前30个字节来分析：</span></span><br><span class="line"></span><br><span class="line">s = <span class="string">b'\x42\x4d\x38\x8c\x0a\x00\x00\x00\x00\x00\x36\x00\x00\x00\x28\x00\x00\x00\x80\x02\x00\x00\x68\x01\x00\x00\x01\x00\x18\x00'</span></span><br><span class="line"><span class="comment"># BMP格式采用小端方式存储数据，文件头的结构按顺序如下：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 两个字节：'BM'表示Windows位图，'BA'表示OS/2位图；</span></span><br><span class="line"><span class="comment"># 一个4字节整数：表示位图大小；</span></span><br><span class="line"><span class="comment"># 一个4字节整数：保留位，始终为0；</span></span><br><span class="line"><span class="comment"># 一个4字节整数：实际图像的偏移量；</span></span><br><span class="line"><span class="comment"># 一个4字节整数：Header的字节数；</span></span><br><span class="line"><span class="comment"># 一个4字节整数：图像宽度；</span></span><br><span class="line"><span class="comment"># 一个4字节整数：图像高度；</span></span><br><span class="line"><span class="comment"># 一个2字节整数：始终为1；</span></span><br><span class="line"><span class="comment"># 一个2字节整数：颜色数。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 所以，组合起来用unpack读取：</span></span><br><span class="line"></span><br><span class="line">print(struct.unpack(<span class="string">'&lt;ccIIIIIIHH'</span>, s))</span><br><span class="line"><span class="comment"># (b'B', b'M', 691256, 0, 54, 40, 640, 360, 1, 24)</span></span><br><span class="line"><span class="comment"># 结果显示，b'B'、b'M'说明是Windows位图，位图大小为640x360，颜色数为24。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hashlib</span></span><br><span class="line"><span class="comment"># 摘要算法简介</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Python的hashlib提供了常见的摘要算法，如MD5，SHA1等等。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 什么是摘要算法呢？摘要算法又称哈希算法、散列算法。它通过一个函数，</span></span><br><span class="line"><span class="comment"># 把任意长度的数据转换为一个长度固定的数据串（通常用16进制的字符串表示）。</span></span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line">md5 = hashlib.md5()</span><br><span class="line">md5.update(<span class="string">'how to used md5 in python hashlib'</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">md5.update(<span class="string">'how to used md5 in python hashlib too'</span>.encode(<span class="string">'utf-8'</span>))<span class="comment">#more time</span></span><br><span class="line">print(md5.hexdigest())</span><br><span class="line">sha1 = hashlib.sha1()</span><br><span class="line">sha1.update(<span class="string">'how to use sha1 in '</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">sha1.update(<span class="string">'python hashlib?'</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">print(sha1.hexdigest())</span><br><span class="line"></span><br><span class="line"><span class="comment"># itertools</span></span><br><span class="line"><span class="comment"># Python的内建模块itertools提供了非常有用的用于操作迭代对象的函数。</span></span><br><span class="line"><span class="comment"># itertools提供的几个“无限”迭代器：</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line">natuals = itertools.count(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">r'''</span><br><span class="line">for x in natuals:</span><br><span class="line">	print(x)</span><br><span class="line">cs = itertools.cycle('ABC') # 注意字符串也是序列的一种</span><br><span class="line">for c in cs:</span><br><span class="line">	print(c)</span><br><span class="line">ns = itertools.repeat('A', 3)</span><br><span class="line">for n in ns:</span><br><span class="line">	print(n)</span><br><span class="line">'''</span></span><br><span class="line"><span class="comment"># 无限序列虽然可以无限迭代下去，但是通常我们会通过takewhile()等函数根据条件判断来截取出一个有限的序列</span></span><br><span class="line">ns = itertools.takewhile(<span class="keyword">lambda</span> x: x &lt;= <span class="number">10</span>, natuals)</span><br><span class="line">print(list(ns))</span><br><span class="line"></span><br><span class="line"><span class="comment"># itertools提供的几个迭代器操作函数chain(),groupby()</span></span><br><span class="line"><span class="comment"># chain()可以把一组迭代对象串联起来，形成一个更大的迭代器</span></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> itertools.chain(<span class="string">'ABC'</span>, <span class="string">'XYZ'</span>):</span><br><span class="line">	print(c)</span><br><span class="line"><span class="comment"># 迭代效果：'A' 'B' 'C' 'X' 'Y' 'Z'</span></span><br><span class="line"><span class="comment"># groupby()把迭代器中相邻的重复元素挑出来放在一起</span></span><br><span class="line"><span class="keyword">for</span> key, group <span class="keyword">in</span> itertools.groupby(<span class="string">'AAABBBCCAAA'</span>):</span><br><span class="line">	print(key, list(group))</span><br><span class="line"><span class="comment"># 迭代效果</span></span><br><span class="line"><span class="comment"># A ['A', 'A', 'A']</span></span><br><span class="line"><span class="comment"># B ['B', 'B', 'B']</span></span><br><span class="line"><span class="comment"># C ['C', 'C']</span></span><br><span class="line"><span class="comment"># A ['A', 'A', 'A']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># XML</span></span><br><span class="line"><span class="comment"># DOM vs SAX</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 操作XML有两种方法：DOM和SAX。DOM会把整个XML读入内存，解析为树，因此占用内存大，解析慢，</span></span><br><span class="line"><span class="comment"># 优点是可以任意遍历树的节点。SAX是流模式，边读边解析，占用内存小，解析快，缺点是我们需要自己处理事件。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 正常情况下，优先考虑SAX，因为DOM实在太占内存。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在Python中使用SAX解析XML非常简洁，通常我们关心的事件是start_element，end_element和char_data，</span></span><br><span class="line"><span class="comment"># 准备好这3个函数，然后就可以解析xml了。</span></span><br><span class="line"><span class="keyword">from</span> xml.parsers.expat <span class="keyword">import</span> ParserCreate</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DefaultSaxHandler</span><span class="params">(object)</span>:</span></span><br><span class="line">	<span class="string">"""docstring for DefaultSaxHandler"""</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		super(DefaultSaxHandler, self).__init__()</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">start_element</span><span class="params">(self, name, attrs)</span>:</span></span><br><span class="line">		print(<span class="string">'sax:start_element: %s, attrs: %s'</span> % (name, str(attrs)))</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">end_element</span><span class="params">(self, name)</span>:</span></span><br><span class="line">		print(<span class="string">'sax:end_element: %s'</span> % name)</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">char_data</span><span class="params">(self, text)</span>:</span></span><br><span class="line">		print(<span class="string">'sax:char_data: %s'</span> %text)</span><br><span class="line">xml = <span class="string">r'''&lt;?xml version="1.0"?&gt;</span><br><span class="line">&lt;ol&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href="/python"&gt;Python&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href="/ruby"&gt;Ruby&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ol&gt;</span><br><span class="line">'''</span></span><br><span class="line">handler = DefaultSaxHandler()</span><br><span class="line">parser = ParserCreate()</span><br><span class="line">parser.StartElementHandler = handler.start_element</span><br><span class="line">parser.EndElementHandler = handler.end_element</span><br><span class="line">parser.CharacterDataHandler = handler.char_data</span><br><span class="line">parser.Parse(xml)</span><br><span class="line"><span class="comment"># 需要注意的是读取一大段字符串时，CharacterDataHandler可能被多次调用，</span></span><br><span class="line"><span class="comment">#所以需要自己保存起来，在EndElementHandler里面再合并。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 除了解析XML外，如何生成XML呢？99%的情况下需要生成的XML结构都是非常简单的，</span></span><br><span class="line"><span class="comment">#因此，最简单也是最有效的生成XML的方法是拼接字符串：</span></span><br><span class="line"><span class="comment"># L = []</span></span><br><span class="line"><span class="comment"># L.append(r'&lt;?xml version="1.0"?&gt;')</span></span><br><span class="line"><span class="comment"># L.append(r'&lt;root&gt;')</span></span><br><span class="line"><span class="comment"># L.append(encode('some &amp; data'))</span></span><br><span class="line"><span class="comment"># L.append(r'&lt;/root&gt;')</span></span><br><span class="line"><span class="comment">#return ''.join(L)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># HTMLParser</span></span><br><span class="line"><span class="comment"># 果我们要编写一个搜索引擎，第一步是用爬虫把目标网站的页面抓下来，</span></span><br><span class="line"><span class="comment"># 第二步就是解析该HTML页面，看看里面的内容到底是新闻、图片还是视频。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设第一步已经完成了，第二步应该如何解析HTML呢？</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># HTML本质上是XML的子集，但是HTML的语法没有XML那么严格，所以不能用标准的DOM或SAX来解析HTML。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 好在Python提供了HTMLParser来非常方便地解析HTML，只需简单几行代码</span></span><br><span class="line"><span class="keyword">from</span> html.parser <span class="keyword">import</span> HTMLParser</span><br><span class="line"><span class="keyword">from</span> html.entities <span class="keyword">import</span> name2codepoint</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHTMLParser</span><span class="params">(HTMLParser)</span>:</span></span><br><span class="line"> 	<span class="string">"""docstring for MyHTMLParser"""</span></span><br><span class="line"> 	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line"> 		super(MyHTMLParser, self).__init__()</span><br><span class="line"> 	<span class="function"><span class="keyword">def</span> <span class="title">handle_starttag</span><span class="params">(self, tag, attrs)</span>:</span></span><br><span class="line"> 		print(<span class="string">'&lt;%s&gt;'</span> % tag)</span><br><span class="line"> 	<span class="function"><span class="keyword">def</span> <span class="title">handle_endtag</span><span class="params">(self, tag)</span>:</span></span><br><span class="line"> 		print(<span class="string">'&lt;/%s&gt;'</span> % tag)</span><br><span class="line"> 	<span class="function"><span class="keyword">def</span> <span class="title">handle_startendtag</span><span class="params">(self, tag, attrs)</span>:</span></span><br><span class="line"> 		print(<span class="string">'&lt;/%s&gt;'</span> % tag)</span><br><span class="line"> 	<span class="function"><span class="keyword">def</span> <span class="title">handle_data</span><span class="params">(self, data)</span>:</span></span><br><span class="line"> 		print(data)</span><br><span class="line"> 	<span class="function"><span class="keyword">def</span> <span class="title">handle_comment</span><span class="params">(self, data)</span>:</span></span><br><span class="line"> 		print(<span class="string">'&lt;!--'</span>, data, <span class="string">'--&gt;'</span>)</span><br><span class="line"> 	<span class="function"><span class="keyword">def</span> <span class="title">handle_entityref</span><span class="params">(self, name)</span>:</span></span><br><span class="line"> 		print(<span class="string">'&amp;%s;'</span> % name)</span><br><span class="line"> 	<span class="function"><span class="keyword">def</span> <span class="title">handle_charref</span><span class="params">(self, name)</span>:</span></span><br><span class="line"> 		print(<span class="string">'&amp;#%s;'</span> % name)</span><br><span class="line">parser = MyHTMLParser()</span><br><span class="line">parser.feed(<span class="string">'''</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!-- test html parser --&gt;</span><br><span class="line">&lt;p&gt;Some &lt;a href=\"#\"&gt;html&lt;/a&gt;HTMLtutorial&lt;br&gt;END&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">'''</span>)</span><br><span class="line"><span class="comment"># feed()方法可以多次调用，也就是不一定一次把整个HTML字符串都塞进去，可以一部分一部分塞进去。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 特殊字符有两种，一种是英文表示的&amp;nbsp;，一种是数字表示的&amp;#1234;，这两种字符都可以通过Parser解析出来。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># urllib</span></span><br><span class="line"><span class="comment"># urllib提供了一系列用于操作URL的功能。</span></span><br><span class="line"><span class="comment"># Get</span></span><br><span class="line"><span class="comment"># urllib的request模块可以非常方便地抓取URL内容，也就是发送一个GET请求到指定的页面，然后返回HTTP的响应：</span></span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> request.urlopen(<span class="string">'https://api.douban.com/v2/book/2129650'</span>) <span class="keyword">as</span> f:</span><br><span class="line">	data = f.read();</span><br><span class="line">	print(<span class="string">'Status:'</span>,f.status, f.reason)</span><br><span class="line">	<span class="keyword">for</span> k, v <span class="keyword">in</span> f.getheaders():</span><br><span class="line">		print(<span class="string">'%s : %s'</span> % (k, v))</span><br><span class="line">	print(<span class="string">'Data: '</span>,data.decode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果我们要想模拟浏览器发送GET请求，就需要使用Request对象，通过往Request对象添加HTTP头，</span></span><br><span class="line"><span class="comment"># 我们就可以把请求伪装成浏览器。例如，模拟iPhone 6去请求豆瓣首页</span></span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"></span><br><span class="line">req = request.Request(<span class="string">'http://www.douban.com/'</span>)</span><br><span class="line">req.add_header(<span class="string">'User-Agent'</span>,<span class="string">'Mozilla/6.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/8.0 Mobile/10A5376e Safari/8536.25'</span>)</span><br><span class="line"><span class="keyword">with</span> request.urlopen(req) <span class="keyword">as</span> f:</span><br><span class="line">	print(<span class="string">'Status:'</span>, f.status, f.reason)</span><br><span class="line">	<span class="keyword">for</span> k, v <span class="keyword">in</span> f.getheaders():</span><br><span class="line">		print(<span class="string">'%s: %s'</span> % (k, v))</span><br><span class="line">	print(<span class="string">'Data:'</span>, f.read().decode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Post</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果要以POST发送一个请求，只需要把参数data以bytes形式传入。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 我们模拟一个微博登录，先读取登录的邮箱和口令，然后按照weibo.cn的登录页的格式以username=xxx&amp;password=xxx的编码传入：</span></span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request, parse</span><br><span class="line"><span class="string">r'''</span><br><span class="line">print('Login to weibo.cn...')</span><br><span class="line">email = input('Email: ')</span><br><span class="line">passwd = input('Password: ')</span><br><span class="line">login_data = parse.urlencode([</span><br><span class="line">    ('username', email),</span><br><span class="line">    ('password', passwd),</span><br><span class="line">    ('entry', 'mweibo'),</span><br><span class="line">    ('client_id', ''),</span><br><span class="line">    ('savestate', '1'),</span><br><span class="line">    ('ec', ''),</span><br><span class="line">    ('pagerefer', 'https://passport.weibo.cn/signin/welcome?entry=mweibo&amp;r=http%3A%2F%2Fm.weibo.cn%2F')</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">req = request.Request('https://passport.weibo.cn/sso/login')</span><br><span class="line">req.add_header('Origin', 'https://passport.weibo.cn')</span><br><span class="line">req.add_header('User-Agent', 'Mozilla/6.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/8.0 Mobile/10A5376e Safari/8536.25')</span><br><span class="line">req.add_header('Referer', 'https://passport.weibo.cn/signin/login?entry=mweibo&amp;res=wel&amp;wm=3349&amp;r=http%3A%2F%2Fm.weibo.cn%2F')</span><br><span class="line"></span><br><span class="line">with request.urlopen(req, data=login_data.encode('utf-8')) as f:</span><br><span class="line">    print('Status:', f.status, f.reason)</span><br><span class="line">    for k, v in f.getheaders():</span><br><span class="line">        print('%s: %s' % (k, v))</span><br><span class="line">    print('Data:', f.read().decode('utf-8'))</span><br><span class="line">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Handler</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果还需要更复杂的控制，比如通过一个Proxy去访问网站，我们需要利用ProxyHandler来处理，示例代码如下：</span></span><br><span class="line"><span class="comment"># proxy_handler = request.ProxyHandler(&#123;'http': 'http://www.example.com:3128/'&#125;)</span></span><br><span class="line"><span class="comment"># proxy_auth_handler = request.ProxyBasicAuthHandler()</span></span><br><span class="line"><span class="comment"># proxy_auth_handler.add_password('realm', 'host', 'username', 'password')</span></span><br><span class="line"><span class="comment"># opener = request.build_opener(proxy_handler, proxy_auth_handler)</span></span><br><span class="line"><span class="comment"># with opener.open('http://www.example.com/login.html') as f:</span></span><br><span class="line"><span class="comment">#     pass</span></span><br><span class="line"><span class="string">r'''</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">import urllib.request </span><br><span class="line">import urllib.parse</span><br><span class="line">import re</span><br><span class="line">import http.cookiejar</span><br><span class="line">print('第三种方法')</span><br><span class="line">url = 'http://www.baidu.com'</span><br><span class="line">cj = http.cookiejar.CookieJar()</span><br><span class="line">opener = urllib.request.build_opener(urllib.request.HTTPCookieProcessor(cj))</span><br><span class="line">urllib.request.install_opener(opener)</span><br><span class="line">respones = urllib.request.urlopen(url)</span><br><span class="line">print(respones.getcode())</span><br><span class="line">print(cj)</span><br><span class="line">print(respones.read())</span><br><span class="line">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># PIL</span></span><br><span class="line"><span class="comment"># PIL：Python Imaging Library，已经是Python平台事实上的图像处理标准库了。PIL功能非常强大，但API却非常简单易用。</span></span><br><span class="line"><span class="comment"># 操作图像</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 来看看最常见的图像缩放操作，只需三四行代码：</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开一个jpg图像文件，注意是当前路径:</span></span><br><span class="line">im = Image.open(<span class="string">'test.jpg'</span>)</span><br><span class="line"><span class="comment"># 获得图像尺寸:</span></span><br><span class="line">w, h = im.size</span><br><span class="line">print(<span class="string">'Original image size: %sx%s'</span> % (w, h))</span><br><span class="line"><span class="comment"># 缩放到50%:</span></span><br><span class="line">im.thumbnail((w//<span class="number">2</span>, h//<span class="number">2</span>))</span><br><span class="line">print(<span class="string">'Resize image to: %sx%s'</span> % (w//<span class="number">2</span>, h//<span class="number">2</span>))</span><br><span class="line"><span class="comment"># 把缩放后的图像用jpeg格式保存:</span></span><br><span class="line">im.save(<span class="string">'thumbnail.jpg'</span>, <span class="string">'jpeg'</span>)</span><br><span class="line"><span class="comment"># 其他功能如切片、旋转、滤镜、输出文字、调色板等一应俱全。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 比如，模糊效果也只需几行代码：</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageFilter</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开一个jpg图像文件，注意是当前路径:</span></span><br><span class="line">im = Image.open(<span class="string">'test.jpg'</span>)</span><br><span class="line"><span class="comment"># 应用模糊滤镜:</span></span><br><span class="line">im2 = im.filter(ImageFilter.BLUR)</span><br><span class="line">im2.save(<span class="string">'blur.jpg'</span>, <span class="string">'jpeg'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># PIL的ImageDraw提供了一系列绘图方法，让我们可以直接绘图。比如要生成字母验证码图片：</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageDraw, ImageFont, ImageFilter</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机字母:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rndChar</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> chr(random.randint(<span class="number">65</span>, <span class="number">90</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机颜色1:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rndColor</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> (random.randint(<span class="number">64</span>, <span class="number">255</span>), random.randint(<span class="number">64</span>, <span class="number">255</span>), random.randint(<span class="number">64</span>, <span class="number">255</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机颜色2:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rndColor2</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> (random.randint(<span class="number">32</span>, <span class="number">127</span>), random.randint(<span class="number">32</span>, <span class="number">127</span>), random.randint(<span class="number">32</span>, <span class="number">127</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 240 x 60:</span></span><br><span class="line">width = <span class="number">60</span> * <span class="number">4</span></span><br><span class="line">height = <span class="number">60</span></span><br><span class="line">image = Image.new(<span class="string">'RGB'</span>, (width, height), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))</span><br><span class="line"><span class="comment"># 创建Font对象:</span></span><br><span class="line">font = ImageFont.truetype(<span class="string">'C:/Windows/Fonts/Arial.ttf'</span>, <span class="number">36</span>)</span><br><span class="line"><span class="comment"># 创建Draw对象:</span></span><br><span class="line">draw = ImageDraw.Draw(image)</span><br><span class="line"><span class="comment"># 填充每个像素:</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(width):</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> range(height):</span><br><span class="line">        draw.point((x, y), fill=rndColor())</span><br><span class="line"><span class="comment"># 输出文字:</span></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">    draw.text((<span class="number">60</span> * t + <span class="number">10</span>, <span class="number">10</span>), rndChar(), font=font, fill=rndColor2())</span><br><span class="line"><span class="comment"># 模糊:</span></span><br><span class="line">image = image.filter(ImageFilter.BLUR)</span><br><span class="line">image.save(<span class="string">'code.jpg'</span>, <span class="string">'jpeg'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># virtualenv</span></span><br><span class="line"><span class="comment"># 在开发Python应用程序的时候，系统安装的Python3只有一个版本：3.4。</span></span><br><span class="line"><span class="comment"># 所有第三方的包都会被pip安装到Python3的site-packages目录下。</span></span><br><span class="line"><span class="comment"># 首先，我们用pip安装virtualenv：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># $ pip3 install virtualenv</span></span><br><span class="line"><span class="comment"># 然后，假定我们要开发一个新的项目，需要一套独立的Python运行环境，可以这么做：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一步，创建目录：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mac:~ michael$ mkdir myproject</span></span><br><span class="line"><span class="comment"># Mac:~ michael$ cd myproject/</span></span><br><span class="line"><span class="comment"># Mac:myproject michael$</span></span><br><span class="line"><span class="comment"># 第二步，创建一个独立的Python运行环境，命名为venv：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mac:myproject michael$ virtualenv --no-site-packages venv</span></span><br><span class="line"><span class="comment"># Using base prefix '/usr/local/.../Python.framework/Versions/3.4'</span></span><br><span class="line"><span class="comment"># New python executable in venv/bin/python3.4</span></span><br><span class="line"><span class="comment"># Also creating executable in venv/bin/python</span></span><br><span class="line"><span class="comment"># Installing setuptools, pip, wheel...done.</span></span><br><span class="line"><span class="comment"># 命令virtualenv就可以创建一个独立的Python运行环境，我们还加上了参数--no-site-packages，这样，已经安装到系统Python环境中的所有第三方包都不会复制过来，这样，我们就得到了一个不带任何第三方包的“干净”的Python运行环境。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建的Python环境被放到当前目录下的venv目录。有了venv这个Python环境，可以用source进入该环境：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mac:myproject michael$ source venv/bin/activate</span></span><br><span class="line"><span class="comment"># (venv)Mac:myproject michael$</span></span><br><span class="line"><span class="comment"># 注意到命令提示符变了，有个(venv)前缀，表示当前环境是一个名为venv的Python环境。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面正常安装各种第三方包，并运行python命令：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (venv)Mac:myproject michael$ pip install jinja2</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="comment"># Successfully installed jinja2-2.7.3 markupsafe-0.23</span></span><br><span class="line"><span class="comment"># (venv)Mac:myproject michael$ python myapp.py</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="comment"># 在venv环境下，用pip安装的包都被安装到venv这个环境下，系统Python环境不受任何影响。也就是说，venv环境是专门针对myproject这个应用创建的。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 退出当前的venv环境，使用deactivate命令：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (venv)Mac:myproject michael$ deactivate </span></span><br><span class="line"><span class="comment"># Mac:myproject michael$</span></span><br><span class="line"><span class="comment"># 此时就回到了正常的环境，现在pip或python均是在系统Python环境下执行。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 完全可以针对每个应用创建独立的Python运行环境，这样就可以对每个应用的Python环境进行隔离。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># virtualenv是如何创建“独立”的Python运行环境的呢？原理很简单，就是把系统Python复制一份到virtualenv的环境，用命令source venv/bin/activate进入一个virtualenv环境时，virtualenv会修改相关环境变量，让命令python和pip均指向当前的virtualenv环境。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 图形界面</span></span><br><span class="line"><span class="comment"># Python支持多种图形界面的第三方库，包括：</span></span><br><span class="line"><span class="comment"># Tk</span></span><br><span class="line"><span class="comment"># wxWidgets</span></span><br><span class="line"><span class="comment"># Qt</span></span><br><span class="line"><span class="comment"># GTK</span></span><br><span class="line"><span class="comment"># Tkinter</span></span><br><span class="line"><span class="string">r'''</span><br><span class="line">from tkinter import *</span><br><span class="line">import tkinter.messagebox as messagebox</span><br><span class="line"></span><br><span class="line">class Application(Frame):</span><br><span class="line">    def __init__(self, master=None):</span><br><span class="line">        Frame.__init__(self, master)</span><br><span class="line">        self.pack()</span><br><span class="line">        self.createWidgets()</span><br><span class="line"></span><br><span class="line">    def createWidgets(self):</span><br><span class="line">        self.nameInput = Entry(self)</span><br><span class="line">        self.nameInput.pack()</span><br><span class="line">        self.alertButton = Button(self, text='Hello', command=self.hello)</span><br><span class="line">        self.alertButton.pack()</span><br><span class="line"></span><br><span class="line">    def hello(self):</span><br><span class="line">        name = self.nameInput.get() or 'world'</span><br><span class="line">        messagebox.showinfo('Message', 'Hello, %s' % name)</span><br><span class="line"></span><br><span class="line">app = Application()</span><br><span class="line"># 设置窗口标题:</span><br><span class="line">app.master.title('Hello World')</span><br><span class="line"># 主消息循环:</span><br><span class="line">app.mainloop()</span><br><span class="line">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># TCP编程</span></span><br><span class="line"><span class="comment"># 客户端</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 大多数连接都是可靠的TCP连接。创建TCP连接时，主动发起连接的叫客户端，被动响应连接的叫服务器。</span></span><br><span class="line"><span class="keyword">import</span> socket,threading,time</span><br><span class="line"></span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">s.connect((<span class="string">'www.sina.com.cn'</span>, <span class="number">80</span>))</span><br><span class="line"><span class="comment"># AF_INET指定使用IPv4协议，如果要用更先进的IPv6，就指定为AF_INET6。</span></span><br><span class="line"><span class="comment"># SOCK_STREAM指定使用面向流的TCP协议</span></span><br><span class="line">s.send(<span class="string">b'GET / HTTP/1.1\r\nHost: www.sina.com.cn\r\nConnection: close\r\n\r\n'</span>)</span><br><span class="line">buffer = []</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">	d = s.recv(<span class="number">1024</span>)</span><br><span class="line">	<span class="keyword">if</span> d:</span><br><span class="line">		buffer.append(d)</span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">data = <span class="string">b''</span>.join(buffer)</span><br><span class="line">s.close()</span><br><span class="line">header, html = data.split(<span class="string">b'\r\n\r\n'</span>, <span class="number">1</span>)</span><br><span class="line">print(header.decode(<span class="string">'utf-8'</span>))</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'sina.html'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">	f.write(html)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 服务器</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 和客户端编程相比，服务器编程就要复杂一些。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 服务器进程</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tcplink</span><span class="params">(sock, addr)</span>:</span></span><br><span class="line">	print(<span class="string">'accept one new link from %s:%s'</span> % addr)</span><br><span class="line">	sock.send(<span class="string">b'Welcome!'</span>)</span><br><span class="line">	<span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">		data = sock.recv(<span class="number">1024</span>)</span><br><span class="line">		time.sleep(<span class="number">1</span>)</span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> data <span class="keyword">or</span> data.decode(<span class="string">'utf-8'</span>) == <span class="string">'exit'</span>:</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		sock.send((<span class="string">'Hello, %s!'</span> % data.decode(<span class="string">'utf-8'</span>)).encode(<span class="string">'utf-8'</span>))</span><br><span class="line">	sock.close()</span><br><span class="line">	print(<span class="string">'connect from %s:%s closed.'</span> % addr)</span><br><span class="line"><span class="string">r'''</span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">s.bind(('127.0.0.1', 9999)) #绑定端口号</span><br><span class="line">s.listen(5)  #调用listen()方法，指定连接的最大数量</span><br><span class="line">print('waiting for connect ...')</span><br><span class="line">while True:</span><br><span class="line">	sock, addr = s.accept()</span><br><span class="line">	t = threading.Thread(target=tcplink, args=(sock, addr))</span><br><span class="line">	t.start()</span><br><span class="line">'''</span></span><br><span class="line"><span class="comment"># UDP编程</span></span><br><span class="line"><span class="comment"># TCP是建立可靠连接，并且通信双方都可以以流的形式发送数据。相对TCP，UDP则是面向无连接的协议。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用UDP协议时，不需要建立连接，只需要知道对方的IP地址和端口号，就可以直接发数据包。但是，能不能到达就不知道了。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 虽然用UDP传输数据不可靠，但它的优点是和TCP比，速度快，对于不要求可靠到达的数据，就可以使用UDP协议。</span></span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> [<span class="string">b'Joy'</span>, <span class="string">b'Tom'</span>, <span class="string">b'Mal'</span>]:</span><br><span class="line">	s.sendto(x,(<span class="string">'127.0.0.1'</span>, <span class="number">9999</span>))</span><br><span class="line">	print(s.recv(<span class="number">1024</span>).decode(<span class="string">'utf-8'</span>))</span><br><span class="line">s.close()</span><br></pre></td></tr></table></figure>
      
    </div>

    <div>
      
        
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/python/" rel="tag">#python</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/04/06/redis下载安装测试/" rel="next" title="redis下载安装测试">
                <i class="fa fa-chevron-left"></i> redis下载安装测试
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/04/06/python学习-1/" rel="prev" title="python学习(1)">
                python学习(1) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/default_avatar.jpg"
               alt="pangyalin" />
          <p class="site-author-name" itemprop="name">pangyalin</p>
          <p class="site-description motion-element" itemprop="description">pangyalin的博客</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">32</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">22</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Python_u5B66_u4E60_282_29"><span class="nav-number">1.</span> <span class="nav-text">Python学习(2)</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">pangyalin</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=0.5.0"></script>



  
  
<script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>

<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = NexT.utils.escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    NexT.motion.middleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');

      if (CONFIG.sidebar.display === 'post' || CONFIG.sidebar.display === 'always') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          NexT.utils.displaySidebar();
        }
      }
    };
  });
</script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  



  



  
  
  

  

  

</body>
</html>
